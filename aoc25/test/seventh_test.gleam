import gleam/set
import seventh

pub fn parse_test() {
  let sut =
    ".......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
..............."

  assert seventh.parse(sut)
    == seventh.Map(
      start: #(7, 0),
      splitters: set.from_list([
        #(7, 2),

        #(6, 4),
        #(8, 4),

        #(5, 6),
        #(7, 6),
        #(9, 6),

        #(4, 8),
        #(6, 8),
        #(10, 8),

        #(3, 10),
        #(5, 10),
        #(9, 10),
        #(11, 10),

        #(2, 12),
        #(6, 12),
        #(12, 12),

        #(1, 14),
        #(3, 14),
        #(5, 14),
        #(7, 14),
        #(9, 14),
        #(13, 14),
      ]),
      length: 16,
    )
}

pub fn count_splits_test() {
  let sut =
    ".......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
..............."

  assert seventh.get_split_count(seventh.parse(sut)) == 21
}
